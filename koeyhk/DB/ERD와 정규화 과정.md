# 4.2 ERD와 정규화 과정

- Entity Relationship Diagram은 데이터베이스를 구축할 때 가장 기초적인 뼈대 역할을 하며, 릴레이션 간의 관계들을 정의한 것

<br>

## 4.2.1 ERD의 중요성

- 시스템의 요구사항을 기반으로 작성되며 ERD를 기반으로 데이터베이스 구축
- 구축 이후에도 디버깅 또는 비즈니스 프로세스 재설계가 필요한 경우 설계도 역할 담당
- 관계형 구조로 비정형 데이터를 충분히 표현할 수 없다는 단점 존재

<br>

## 4.2.3 정규화 과정

- 릴레이션 간의 잘못된 종속 관계로 인해 데이터베이스 이상 현상이 일어나서 이를 해결하거나, 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정
- 기본 정규형: 제1정규형, 제2정규형, 제3정규형, 보이스/코드 정규형
- 고급 정규형: 제4정규형, 제5정규형

### 정규형 원칙

- 같은 의미를 표현하는 릴레이션이지만 좀 더 좋은 구조로 만들어야 하고, 자료의 중복성은 감소해야 하고, 독립적인 관계는 별개의 릴레이션으로 표현해야 하며, 각각의 릴레이션은 독립적인 표현이 가능해야 하는 것

<br>

### 제1정규형

- 릴레이션의 모든 도메인이 더 이상 분해될 수 없는 원자 값(atomic value)만으로 구성되어야 함
- 릴레이션의 속성 값 중 한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복 집합이 있어서는 안 됨

<br>

### 제2정규형

- 릴레이션이 제정규형이며 부분 함수의 종속성을 제거한 형태를 말함
- 부분 함수의 종속성 제거란 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속적인 것을 말함

**<제2정규화 적용 전>**

<img src="https://github.com/98000001/CS-Study/assets/80199502/3391e35a-5248-4fef-8fc8-d142e5dd02e4"  width="600">

**<제2정규화 적용 후>**

<img src="https://github.com/98000001/CS-Study/assets/80199502/0cb8a389-4179-4a2e-aa4e-1da2efeb3d91"  width="600">

<br>
<br>

### 제3정규형

- 제2정규형이고 기본키가 아닌 모든 속성이 이행적 함수 종속을 만족하지 않는 상태
- 이행적 함수 종속: A→B, B→C가 존재하면 논리적으로 A→C 성립. C가 A에 이행적으로 함수 종속

**<제3정규화 적용 전>**

<img src="https://github.com/98000001/CS-Study/assets/80199502/ac4f9779-2515-4c3d-87f0-2ae0d5521792"  width="600">

**<제3정규화 적용 후>**

<img src="https://github.com/98000001/CS-Study/assets/80199502/c7b945b9-47fc-4631-8a62-3f717d9d18e7"  width="600">

<br>
<br>

### 보이스/코드 정규형

- 보이스/코드 정규형(BCNF)은 제3정규형이고, 결정자가 후보키가 아닌 함수 종속 관계를 제거하여 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키인 상태
    - 결정자: 함수 종속 관계에서 특정 종속자를 결정짓는 요소, X→Y일 때 X는 결정자, Y는 종속자
- 테이블을 나누게 되면 어떠한 쿼리는 조인을 해야 하는 경우도 발생해 오히려 느려질 수 있기 때문에 서비스에 따라 정규화 또는 비정규화 과정을 진행해야 함

**<보이스/코드 정규화 적용 전>**

<img src="https://github.com/98000001/CS-Study/assets/80199502/36ef0639-f7f3-42cb-bc94-94abd719b48a"  width="600">

**<보이스/코드 정규화 적용 후>**

<img src="https://github.com/98000001/CS-Study/assets/80199502/30b363d9-d545-4f00-a2ef-30be0a4dd941"  width="600">


<br><br><br><br><br>

참고 자료: <br>
https://velog.io/@wisdom-one/%EC%A0%95%EA%B7%9C%ED%99%94Normalization <br>
