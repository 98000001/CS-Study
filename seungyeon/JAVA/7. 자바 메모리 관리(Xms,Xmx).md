# 자바 메모리 관리 (Xms,Xmx)

### Xms,Xmx 란?

-Xms, -Xmx 옵션은 jar 파일 실행 시 초기 할당 메모리/최대 할당 메모리 를 지정하는 옵션.

- Xms 는 최소 할당 메모리가 아닌, **초기 할당 메모리!**

### 왜 Xmx, Xms 를 지정해야할까?

- Xmx가 작은 경우
    - JVM 은 메모리가 부족하면 OS에 메모리를 추가로 요청 → Heap 사이즈 조정함
    - 이 때 GC 발생, JVM 은 필요한만큼 Heap 사이즈 늘림.
    - 이렇게 조정하다가 JVM의 물리 메모리 사이즈를 넘어가면, 가상 메모리를 사용하며 swap space 로 swap in-out 함.
    - 이 때 swap 영역은 disk 가 되므로 오버헤드 발생.
    - swap 영역인 disk 에 I/O 하고 동시에 GC 도 발생한다면 꽤 큰 성능이슈 발생
- 또한 Xmx ≠ Xms 일 때도 문제 발생 가능
    - Xmx 가 너무 작을 경우 빈번한 GC,  메모리 추가 요청하며 Xmx와 동일한 사이즈 갖게됨